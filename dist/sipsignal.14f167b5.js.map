{"mappings":"AAAA,MAAMA,EAAcC,SAASC,cAAc,gBACrCC,EAAYF,SAASC,cAAc,SACnCE,EAAWH,SAASC,cAAc,aAElCG,EAAeJ,SAASC,cAAc,YACtCI,EAAgBL,SAASC,cAAc,kBAG7CG,EAAaE,iBAAiB,SAAUC,IACtC,MAAMC,EAASD,EAAME,OAAOC,MAAMF,OAClCH,EAAcM,YAAcH,EAAS,UAIvCJ,EAAaE,iBAAiB,WAAYC,IACpCA,EAAME,OAAOC,MAAMF,QAAU,KAC/BD,EAAMK,oBAIVV,EAAUI,iBAAiB,UAAQ,iBAUjCH,EAASU,UAAY,GACrB,IAAK,IAAIC,EAAI,EAAGA,EAAIZ,EAAUa,MAAMP,OAAQM,IAC1CX,EAASU,WAAaX,EAAUa,MAAMC,KAAKF,GAAGG,KAAO,OAXvDC,MAGFnB,EAAYO,iBAAiB,UAAWa,IACtCA,EAAEP,0BAWUL,EAAOa,GACnBC,QAAQC,IAAI,oBACGf,EAATK,eAAiBL,EAAMK,iBAAoBL,EAAMgB,aAAc,EACrE,IAAIC,EAAM,IAAIC,eACdD,EAAIE,KAAK,OAAQN,GAAK,GACtBI,EAAIG,OAAS,WACPH,EAAII,QAAU,KAAOJ,EAAII,OAAS,KACpCC,KAAOC,KAAKC,MAAMC,KAAKC,UACvBZ,QAAQC,IAAIO,MAEO,WAAfA,KAAKK,OACPC,MAAM,wBAEaA,MAAb,oCAGRA,MAAM,0BAAyBX,EAAAI,SAInCJ,EAAIY,QAAU,WACZD,MAAM,4BAERX,EAAIa,KAAK,IAAIC,SAAS/B,EAAME,SAjC5B8B,CAAKpB,EAAG","sources":["src/scripts/send-mail.js"],"sourcesContent":["const contactForm = document.querySelector(\"#contactForm\");\r\nconst fileInput = document.querySelector(\"#file\");\r\nconst fileList = document.querySelector(\"#filelist\");\r\n\r\nconst messageField = document.querySelector(\"#message\");\r\nconst messageLength = document.querySelector(\"#messageLength\");\r\n\r\n// Display typed message length\r\nmessageField.addEventListener(\"input\", (event) => {\r\n  const length = event.target.value.length;\r\n  messageLength.textContent = length + \"/280\";\r\n});\r\n\r\n// Prevent user from typing more than 280 char\r\nmessageField.addEventListener(\"keydown\", (event) => {\r\n  if (event.target.value.length >= 280) {\r\n    event.preventDefault();\r\n  }\r\n});\r\n\r\nfileInput.addEventListener(\"change\", () => {\r\n  updateFileDisplay();\r\n});\r\n\r\ncontactForm.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  send(e, \"../mailer/mailer.php\");\r\n});\r\n\r\nfunction updateFileDisplay() {\r\n  fileList.innerHTML = \"\";\r\n  for (let i = 0; i < fileInput.files.length; i++) {\r\n    fileList.innerHTML += fileInput.files.item(i).name + \"<br>\";\r\n  }\r\n}\r\n\r\nfunction send(event, php) {\r\n  console.log(\"Отправка запроса\");\r\n  event.preventDefault ? event.preventDefault() : (event.returnValue = false);\r\n  var req = new XMLHttpRequest();\r\n  req.open(\"POST\", php, true);\r\n  req.onload = function () {\r\n    if (req.status >= 200 && req.status < 400) {\r\n      json = JSON.parse(this.response);\r\n      console.log(json);\r\n\r\n      if (json.result == \"success\") {\r\n        alert(\"Сообщение отправлено\");\r\n      } else {\r\n        alert(\"Ошибка. Сообщение не отправлено\");\r\n      }\r\n    } else {\r\n      alert(\"Ошибка сервера. Номер: \" + req.status);\r\n    }\r\n  };\r\n\r\n  req.onerror = function () {\r\n    alert(\"Ошибка отправки запроса\");\r\n  };\r\n  req.send(new FormData(event.target));\r\n}\r\n"],"names":["$1093c8be7789f472$var$contactForm","document","querySelector","$1093c8be7789f472$var$fileInput","$1093c8be7789f472$var$fileList","$1093c8be7789f472$var$messageField","$1093c8be7789f472$var$messageLength","addEventListener","event","length","target","value","textContent","preventDefault","innerHTML","i","files","item","name","$1093c8be7789f472$var$updateFileDisplay","e","php","console","log","returnValue","req","XMLHttpRequest","open","onload","status","json","JSON","parse","this","response","result","alert","onerror","send","FormData","$1093c8be7789f472$var$send"],"version":3,"file":"sipsignal.14f167b5.js.map"}